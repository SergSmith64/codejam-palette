!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=2)}([function(e,t){e.exports.drawImage=(e,t)=>{let o=0,n=0,r=0;o=512/t.length;for(let l of t){for(let t of l)drawPixel(e,r,n,o,t),n++;r++,n=0}}},function(e,t,o){e.exports=o.p+"./public/images/favicon.ico"},function(e,t,o){"use strict";o.r(t);o(3),o(1);console.log("ВХОДНОЙ_ФАЙЛ___INDEX.JS");const{drawImage:n}=o(0);let r=[],l=4,c=512/l;console.log(localStorage.getItem("image")),console.log(localStorage.getItem("image"));let s,a,i="pensil",u=S,f=localStorage.getItem("currentColor")?localStorage.getItem("currentColor"):"#000000",d=localStorage.getItem("prevColor")?localStorage.getItem("prevColor"):"#ffffff",_=!1;const m=document.getElementById("canvas");m.width=512,m.height=512;const g=m.getContext("2d");function v(e){const t=document.querySelector(`.tools__item--${e}`);switch(t&&(document.querySelector(`.tools__item--${i}`).classList.remove("selected"),u(),i=e,console.log("__currentTool____",i),console.log("__tool___________",e),t.classList.add("selected"),localStorage.setItem("currentTool",i)),e){case"paint-bucket":m.addEventListener("mousedown",C),u=b,console.log("tool___",e);break;case"choose-color":m.addEventListener("mousedown",E),u=p,console.log("tool___",e);break;case"pensil":h(),u=S,console.log("tool___",e);break;case"move":selectMove(),u=unSelectMove;break;case"save":K(),u=k;break;case"select-color":y.click(),console.log("tool___",e);break;default:h(),u=S}}localStorage.getItem("image")?n(g,r):j(),document.querySelectorAll(".tools__item").forEach(e=>{e.addEventListener("click",()=>v(e.dataset.type)),e.dataset.type===i&&(e.classList.add("selected"),h())}),document.querySelectorAll(".switcher__item").forEach(e=>{e.addEventListener("click",()=>function(e){document.querySelector(`.switcher__item--${l}`).classList.remove("selected"),e.classList.add("selected"),l=e.dataset.canvassize,c=512/l,j(),localStorage.setItem("canvasSize",l)}(e)),e.dataset.canvassize==l&&e.classList.add("selected")});const y=document.getElementById("current-color");function b(){m.removeEventListener("mousedown",C)}function p(){m.removeEventListener("mousedown",E)}function h(){m.addEventListener("mousedown",x),m.addEventListener("mousemove",M),m.addEventListener("mouseup",O),m.addEventListener("mouseout",O)}function S(){m.removeEventListener("mousedown",x),m.removeEventListener("mousemove",M),m.removeEventListener("mouseup",O),m.removeEventListener("mouseout",O)}function k(){}function E(e){let{x:t,y:o}=P(e);L(r[t][o])}function L(e){f!==e&&(d=f,f=e,localStorage.setItem("currentColor",f),localStorage.setItem("prevColor",d),s.style.backgroundColor=f,a.style.backgroundColor=d)}function C(e){let{x:t,y:o}=P(e);!function(e,t,o,n){let s=[[e,t]];for(let e=0;e!=s.length;e++){let t=s[e][0],a=s[e][1];if(t>=0&&a>=0&&t<l&&a<l&&r[t][a]==o){q(g,t,a,c,n);let e=s.length;s[e]=[t+1,a],s[e+1]=[t-1,a],s[e+2]=[t,a+1],s[e+3]=[t,a-1]}}}(t,o,r[t][o],f)}y.addEventListener("change",e=>{L(e.target.value)}),document.querySelectorAll(".colors__item").forEach(e=>{if(e.addEventListener("click",()=>function(e){if(null!==e.firstChild)switch(e.dataset.color){case"current":y.click(),s.style.backgroundColor=f;break;case"prev":L(d);break;default:L(e.dataset.color)}}(e)),null!==e.firstChild)switch(e.dataset.color){case"current":s=e.firstChild,e.firstChild.style.backgroundColor=f;break;case"prev":a=e.firstChild,e.firstChild.style.backgroundColor=d;break;default:e.firstChild.style.backgroundColor=e.dataset.color}});let w=0,I=0;function x(e){let{x:t,y:o}=P(e);q(g,t,o,c,f),w=t,I=o,_=!0}function M(e){let{x:t,y:o}=P(e);_&&function(e,t,o,n){let r=Math.abs(o-e),l=Math.abs(n-t),s=e<o?1:-1,a=t<n?1:-1,i=r-l;q(g,o,n,c,f);for(;e!=o||t!=n;){q(g,e,t,c,f);let o=2*i;o>-l&&(i-=l,e+=s),o<r&&(i+=r,t+=a)}}(w,I,t,o),w=t,I=o}function O(){_=!1}function j(){r=[];for(let e=0;e<l;e++){r[e]=[];for(let t=0;t<l;t++)r[e][t]="#ffffff",q(g,e,t,c,"#ffffff")}K()}function P(e){return{x:Math.floor(e.offsetX/c),y:Math.floor(e.offsetY/c)}}function q(e,t,o,n,l){r[t][o]=l,e.fillStyle=l,console.log("color___= ",l),e.fillRect(t*n,o*n,n,n)}function K(){localStorage.setItem("image",JSON.stringify(r))}document.addEventListener("keydown",e=>v(function(e){switch(e){case"KeyP":return"pensil";case"KeyB":return"paint-bucket";case"KeyC":return"select-color";case"KeyS":return"save"}}(e.code))),console.log("__event________: ",event),console.log("КОНЕЦ________")},function(e,t){}]);