!function(e){var t={};function o(n){if(t[n])return t[n].exports;var l=t[n]={i:n,l:!1,exports:{}};return e[n].call(l.exports,l,l.exports,o),l.l=!0,l.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)o.d(n,l,function(t){return e[t]}.bind(null,l));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=2)}([function(e,t){e.exports.drawImage=(e,t)=>{console.log("__работает__модуль__drawImage____");let o=0,n=0,l=0;o=512/t.length;for(let r of t){for(let t of r)drawPixel(e,l,n,o,t),n++;l++,n=0}}},function(e,t,o){e.exports=o.p+"./public/images/favicon.ico"},function(e,t,o){"use strict";o.r(t);o(3),o(1);console.log("ВХОДНОЙ_ФАЙЛ___INDEX.JS");const{drawImage:n}=o(0);let l,r,c=[],s=4,a=512/s,_="pensil",i=S,u=localStorage.getItem("currentColor")?localStorage.getItem("currentColor"):"#000000",d=localStorage.getItem("prevColor")?localStorage.getItem("prevColor"):"#ffffff",f=!1;const m=document.getElementById("canvas");m.width=512,m.height=512;const g=m.getContext("2d");function v(e){const t=document.querySelector(`.tools__item--${e}`);switch(t&&(document.querySelector(`.tools__item--${_}`).classList.remove("selected"),i(),_=e,console.log("__tool____ПЕРЕКЛЮЧАЮСЬ НА_____",e),t.classList.add("selected"),localStorage.setItem("currentTool",_)),e){case"paint-bucket":m.addEventListener("mousedown",C),i=p,console.log("tool___",e);break;case"choose-color":m.addEventListener("mousedown",L),i=b,console.log("tool___",e);break;case"pensil":h(),i=S,console.log("tool___",e);break;case"move":selectMove(),i=unSelectMove;break;case"save":z(),i=k;break;case"select-color":y.click(),console.log("tool___",e);break;default:h(),i=S}}localStorage.getItem("image")?n(g,c):P(),document.querySelectorAll(".tools__item").forEach(e=>{e.addEventListener("click",()=>v(e.dataset.type)),e.dataset.type===_&&(e.classList.add("selected"),h())}),document.querySelectorAll(".switcher__item").forEach(e=>{e.addEventListener("click",()=>function(e){document.querySelector(`.switcher__item--${s}`).classList.remove("selected"),e.classList.add("selected"),s=e.dataset.canvassize,a=512/s,console.log("__РАЗМЕР__canvasWidth__ДЕЛИТЬ____= ",512),console.log("__РАЗМЕР__canvasSize___НА________= ",s),console.log("__РАЗМЕР__pixelSize____ПОЛУЧАЕМ__= ",a),P(),localStorage.setItem("canvasSize",s)}(e)),e.dataset.canvassize==s&&e.classList.add("selected")});const y=document.getElementById("current-color");function p(){m.removeEventListener("mousedown",C)}function b(){m.removeEventListener("mousedown",L)}function h(){m.addEventListener("mousedown",x),m.addEventListener("mousemove",M),m.addEventListener("mouseup",O),m.addEventListener("mouseout",O)}function S(){m.removeEventListener("mousedown",x),m.removeEventListener("mousemove",M),m.removeEventListener("mouseup",O),m.removeEventListener("mouseout",O)}function k(){}function L(e){let{x:t,y:o}=j(e);E(c[t][o])}function E(e){u!==e&&(d=u,u=e,localStorage.setItem("currentColor",u),localStorage.setItem("prevColor",d),l.style.backgroundColor=u,r.style.backgroundColor=d)}function C(e){let{x:t,y:o}=j(e);!function(e,t,o,n){let l=[[e,t]];console.log("__работает___Fill___");for(let e=0;e!=l.length;e++){let t=l[e][0],r=l[e][1];if(t>=0&&r>=0&&t<s&&r<s&&c[t][r]==o){q(g,t,r,a,n);let e=l.length;l[e]=[t+1,r],l[e+1]=[t-1,r],l[e+2]=[t,r+1],l[e+3]=[t,r-1]}}}(t,o,c[t][o],u)}y.addEventListener("change",e=>{E(e.target.value)}),document.querySelectorAll(".colors__item").forEach(e=>{if(e.addEventListener("click",()=>function(e){if(null!==e.firstChild)switch(e.dataset.color){case"current":y.click(),l.style.backgroundColor=u;break;case"prev":E(d);break;default:E(e.dataset.color)}}(e)),null!==e.firstChild)switch(e.dataset.color){case"current":l=e.firstChild,e.firstChild.style.backgroundColor=u;break;case"prev":r=e.firstChild,e.firstChild.style.backgroundColor=d;break;default:e.firstChild.style.backgroundColor=e.dataset.color}});let w=0,I=0;function x(e){console.log("__работает___startPensil__");let{x:t,y:o}=j(e);q(g,t,o,a,u),w=t,I=o,f=!0}function M(e){let{x:t,y:o}=j(e);f&&function(e,t,o,n){let l=Math.abs(o-e),r=Math.abs(n-t),c=e<o?1:-1,s=t<n?1:-1,_=l-r;console.log("__работает___drawLine___"),q(g,o,n,a,u);for(;e!=o||t!=n;){q(g,e,t,a,u);let o=2*_;o>-r&&(_-=r,e+=c),o<l&&(_+=l,t+=s)}}(w,I,t,o),w=t,I=o}function O(){f=!1}function P(){console.log("__работает___canvasClear___"),c=[];for(let e=0;e<s;e++){c[e]=[];for(let t=0;t<s;t++)c[e][t]="#ffffff",q(g,e,t,a,"#ffffff")}z()}function j(e){return{x:Math.floor(e.offsetX/a),y:Math.floor(e.offsetY/a)}}function q(e,t,o,n,l){c[t][o]=l,e.fillStyle=l,console.log("__ЦВЕТ_СЕЙЧАС__= ",l),e.fillRect(t*n,o*n,n,n)}function z(){localStorage.setItem("image",JSON.stringify(c))}document.addEventListener("keydown",e=>v(function(e){switch(e){case"KeyP":return"pensil";case"KeyB":return"paint-bucket";case"KeyC":return"select-color";case"KeyS":return"save"}console.log("__работает___Set-Hot-Key___")}(e.code))),console.log("__event________: ",event),console.log("КОНЕЦ________")},function(e,t){}]);