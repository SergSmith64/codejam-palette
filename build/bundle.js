!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=1)}([function(e,t,o){e.exports=o.p+"./public/images/favicon.ico"},function(e,t,o){"use strict";o.r(t);o(2),o(0);console.log("ВХОДНОЙ_ФАЙЛ___INDEX.JS");let n=[],r=4;localStorage.getItem("image")&&(n=JSON.parse(localStorage.getItem("image")),r=n.length);let l,c,a=512/r,s="pensil",i=S,u=localStorage.getItem("currentColor")?localStorage.getItem("currentColor"):"#000000",f=localStorage.getItem("prevColor")?localStorage.getItem("prevColor"):"#ffffff",d=!1;const m=document.getElementById("canvas");m.width=512,m.height=512;const v=m.getContext("2d");function g(e){const t=document.querySelector(`.tools__item--${e}`);switch(t&&(document.querySelector(`.tools__item--${s}`).classList.remove("selected"),i(),s=e,t.classList.add("selected"),localStorage.setItem("currentTool",s)),e){case"paint-bucket":m.addEventListener("mousedown",_),i=b;break;case"choose-color":m.addEventListener("mousedown",E),i=p;break;case"pensil":h(),i=S;break;case"move":selectMove(),i=unSelectMove;break;case"save":P(),i=k;break;case"select-color":y.click();break;default:h(),i=S}}localStorage.getItem("image")?function(e,t){let o=0,n=0,r=0;o=512/t.length;for(let l of t){for(let t of l)q(e,r,n,o,t),n++;r++,n=0}}(v,n):O(),document.querySelectorAll(".tools__item").forEach(e=>{e.addEventListener("click",()=>g(e.dataset.type)),e.dataset.type===s&&(e.classList.add("selected"),h())}),document.querySelectorAll(".switcher__item").forEach(e=>{e.addEventListener("click",()=>function(e){document.querySelector(`.switcher__item--${r}`).classList.remove("selected"),e.classList.add("selected"),r=e.dataset.canvassize,a=512/r,O(),localStorage.setItem("canvasSize",r)}(e)),e.dataset.canvassize==r&&e.classList.add("selected")});const y=document.getElementById("current-color");function b(){m.removeEventListener("mousedown",_)}function p(){m.removeEventListener("mousedown",E)}function h(){m.addEventListener("mousedown",I),m.addEventListener("mousemove",x),m.addEventListener("mouseup",M),m.addEventListener("mouseout",M)}function S(){m.removeEventListener("mousedown",I),m.removeEventListener("mousemove",x),m.removeEventListener("mouseup",M),m.removeEventListener("mouseout",M)}function k(){}function E(e){let{x:t,y:o}=j(e);L(n[t][o])}function L(e){u!==e&&(f=u,u=e,localStorage.setItem("currentColor",u),localStorage.setItem("prevColor",f),l.style.backgroundColor=u,c.style.backgroundColor=f)}function _(e){let{x:t,y:o}=j(e);!function(e,t,o,l){let c=[[e,t]];for(let e=0;e!=c.length;e++){let t=c[e][0],s=c[e][1];if(t>=0&&s>=0&&t<r&&s<r&&n[t][s]==o){q(v,t,s,a,l);let e=c.length;c[e]=[t+1,s],c[e+1]=[t-1,s],c[e+2]=[t,s+1],c[e+3]=[t,s-1]}}}(t,o,n[t][o],u)}y.addEventListener("change",e=>{L(e.target.value)}),document.querySelectorAll(".colors__item").forEach(e=>{if(e.addEventListener("click",()=>function(e){if(null!==e.firstChild)switch(e.dataset.color){case"current":y.click(),l.style.backgroundColor=u;break;case"prev":L(f);break;default:L(e.dataset.color)}}(e)),null!==e.firstChild)switch(e.dataset.color){case"current":l=e.firstChild,e.firstChild.style.backgroundColor=u;break;case"prev":c=e.firstChild,e.firstChild.style.backgroundColor=f;break;default:e.firstChild.style.backgroundColor=e.dataset.color}});let C=0,w=0;function I(e){let{x:t,y:o}=j(e);q(v,t,o,a,u),C=t,w=o,d=!0}function x(e){let{x:t,y:o}=j(e);d&&function(e,t,o,n){let r=Math.abs(o-e),l=Math.abs(n-t),c=e<o?1:-1,s=t<n?1:-1,i=r-l;q(v,o,n,a,u);for(;e!=o||t!=n;){q(v,e,t,a,u);let o=2*i;o>-l&&(i-=l,e+=c),o<r&&(i+=r,t+=s)}}(C,w,t,o),C=t,w=o}function M(){d=!1}function O(){n=[];for(let e=0;e<r;e++){n[e]=[];for(let t=0;t<r;t++)n[e][t]="#ffffff",q(v,e,t,a,"#ffffff")}P()}function j(e){return{x:Math.floor(e.offsetX/a),y:Math.floor(e.offsetY/a)}}function q(e,t,o,r,l){n[t][o]=l,e.fillStyle=l,e.fillRect(t*r,o*r,r,r)}function P(){localStorage.setItem("image",JSON.stringify(n))}document.addEventListener("keydown",e=>g(function(e){switch(e){case"KeyP":return"pensil";case"KeyB":return"paint-bucket";case"KeyC":return"select-color";case"KeyS":return"save"}}(e.code)))},function(e,t){}]);